(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){e.exports=a(82)},49:function(e,t,a){},50:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),l=(a(49),a(18)),i=a(8),o=a(1),u=a(2),m=a(4),h=a(3),p=a(5),g=(a(50),a(15)),d=a(19),f=a(16),b=a(17),E=a.n(b),v=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){return t.instance.post("/signup",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.login=function(e){return t.instance.post("/login",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.loggedInUser=function(){return t.instance.get("/loggedin").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.upload=function(e){return t.instance.post("/upload",e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.logout=function(){return t.instance.post("/logout").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=E.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_URL:"https://elimperio.herokuapp.com/api"}).REACT_APP_API_URL,"/auth"),withCredentials:!0})},O=a(6),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(i.a)({},a.state,Object(f.a)({},n,r)))},a.handleLogin=function(e){var t=a.props,n=t.setUser,r=t.history;e.preventDefault(),a.authService.login(a.state).then((function(e){n(e),r.push("/")}),(function(e){console.error(e)}))},a.authService=new v,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.password,a=e.email;return r.a.createElement("div",{className:"container box signup-container"},r.a.createElement("h2",{className:"title is-1"},"Login"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleLogin},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",name:"email",value:a,onChange:this.handleChange,placeholder:"Tu Email"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"},"\u2709\ufe0f")),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Contrase\xf1a"),r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"password",value:t,name:"password",required:!0,onChange:this.handleChange,placeholder:"********"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"},"\ud83d\udd12")),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link"},"Entrar")),r.a.createElement("div",{className:"control"},r.a.createElement(O.b,{to:"/",className:"button is-link is-light"},"Cancelar"))))))}}]),t}(n.Component),j=a(42),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={name:"",surname:"",password:"",email:"",token:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(i.a)({},a.state,Object(f.a)({},n,r)))},a.handleSignUp=function(e){e.preventDefault();var t=a.props,n=t.history,r=t.setUser;a.authService.signup(a.state).then((function(e){r(e),n.push("/")}),(function(e){console.error(e)}))},a.handleUpload=function(e){console.log(e.target.files[0]);var t=new FormData;console.log(t),t.append("picture",e.target.files[0]),console.log(t.getAll("picture")),a.authService.upload(t).then((function(e){console.log(e),a.setState(Object(i.a)({},a.state,{picture:e.secure_url}))}),(function(e){console.error(e)}))},a.authService=new v,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.surname,n=e.password,c=e.email;return r.a.createElement("div",{className:"container box signup-container"},r.a.createElement("h2",{className:"title is-1"},"Registro"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSignUp},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Nombre"),r.a.createElement("input",{className:"input",type:"text",name:"name",value:t,onChange:this.handleChange,placeholder:"Tu Nombre"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Apellido"),r.a.createElement("input",{className:"input",type:"text",name:"surname",value:a,onChange:this.handleChange,placeholder:"Tu Apellido"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",name:"email",value:c,onChange:this.handleChange,placeholder:"Tu Email"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"},"\u2709\ufe0f")),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Contrase\xf1a"),r.a.createElement("div",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"password",value:n,name:"password",required:!0,onChange:this.handleChange,placeholder:"********"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"},"\ud83d\udd12")),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})))),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link"},"Crear cuenta")),r.a.createElement("div",{className:"control"},r.a.createElement(O.b,{to:"/",className:"button is-link is-light"},"Cancelar"))))),r.a.createElement(j.GoogleLogin,{clientId:"XXXXXXXXXX",buttonText:"Login",onSuccess:this.googleResponse,onFailure:this.googleResponse}))}}]),t}(n.Component),y=a(43);function k(e){var t=e.component,a=e.hangers,n=e.user,c=e.redirectPath,s=Object(y.a)(e,["component","hangers","user","redirectPath"]);return r.a.createElement(g.b,Object.assign({},s,{render:function(e){return n?r.a.createElement(t,Object.assign({loggedInUser:n},e,{hangers:a})):r.a.createElement(g.a,{to:{pathname:c}})}}))}a(75);var U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).authService=new v,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.Sticky,{topOffset:180},(function(t){var a=t.style;return r.a.createElement("nav",{style:a,className:"navbar is-dark main-navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(O.b,{to:"/",className:"navbar-item"},r.a.createElement("img",{src:"https://res.cloudinary.com/dexfqvxax/image/upload/v1576179123/ResourcesIMPERIO/Logo_elImperio_hmij4g.png",width:"100",height:"35"})),r.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(O.b,{to:"/",className:"navbar-item"},"Inicio"),r.a.createElement(O.b,{to:"/catalogue",className:"navbar-item"},"Cat\xe1logo")),r.a.createElement("div",{className:"navbar-end"},!e.props.name&&r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(O.b,{to:"/signup",className:"button is-primary"},r.a.createElement("strong",null,"Reg\xedstrate")),r.a.createElement(O.b,{to:"/login",className:"button is-light"},"Iniciar sesi\xf3n"))),e.props.name&&r.a.createElement("div",{className:"navbar-item"},r.a.createElement(O.b,{to:"/cart",className:"shop-cart-logo"},r.a.createElement("img",{src:"https://res.cloudinary.com/dexfqvxax/image/upload/v1576486235/ResourcesIMPERIO/Cart_imperio_v6awzb.png",alt:""})),r.a.createElement("div",{className:"probando"},r.a.createElement("span",{className:"prt"},e.props.name),r.a.createElement("span",null,e.props.surname)),r.a.createElement(O.b,{to:"/profile"},r.a.createElement("img",{className:"logo",src:e.props.picture,alt:e.props.name})),r.a.createElement("div",{className:"buttons"},r.a.createElement(O.b,{to:"/logout",onClick:function(t){return e.props.logout(t)},className:"button is-light"},"Logout"))))))})))}}]),t}(n.Component),w=function e(){var t=this;Object(o.a)(this,e),this.createHanger=function(){return t.instance.post("/new").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.readHangers=function(){return t.instance.get("/").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.profileHanger=function(e){return t.instance.get("/".concat(e)).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=E.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_URL:"https://elimperio.herokuapp.com/api"}).REACT_APP_API_URL,"/hangers")})},x=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props,t=e.name,a=(e.colors,e.images),n=e.type,c=e._id,s=(e.goToCart,"/catalogue/".concat(c));return r.a.createElement("div",{className:"container box"},r.a.createElement(O.b,{to:s},r.a.createElement("img",{width:"100px",src:a[0],alt:t}),r.a.createElement("h2",null,t),r.a.createElement("h3",null,n)))}}]),t}(n.Component),P=(a(81),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).hangerService=new w,e.state={hangers:[],hangerToCart:""},e.hangerCop=[e.state.hangers],e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"searchHanger",value:function(e){var t;e.preventDefault(),t=Object(l.a)(this.hangerCop).filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())||t.times.toLowerCase().includes(e.target.value.toLowerCase())})),this.setState(Object(i.a)({},this.state,{hangers:t}))}},{key:"componentDidMount",value:function(){var e=this;this.hangerService.readHangers().then((function(t){e.hangerCop=t,e.setState(Object(i.a)({},e.state,{hangers:t}))}))}},{key:"render",value:function(){var e=this,t=this.state.hangers;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"title is-1 has-text-centered"},"\ud83d\udcb6Cat\xe1logo\ud83d\udcb7"),r.a.createElement("div",{className:"container search-bar-container"},r.a.createElement("input",{type:"text",className:"input is-warning search-bar",name:"search-bar",placeholder:"\ud83d\udd0e Busqueda . . .  ",onChange:function(t){return e.searchHanger(t)}})),r.a.createElement("div",{className:"wrap"},t.map((function(e,t){if(t<4)return r.a.createElement(x,Object.assign({key:t},e))}))))}}]),t}(n.Component)),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).hangerService=new w,a.state={hanger:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"searchHanger",value:function(){return this.props.match.params.id}},{key:"componentDidMount",value:function(){var e=this;this.hangerService.profileHanger(this.searchHanger()).then((function(t){e.setState(Object(i.a)({},e.state,{hanger:t}))}))}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",null,r.a.createElement("h1",null,"HangerProfile"),r.a.createElement("h2",null,this.state.hanger.name),t&&r.a.createElement("button",{className:"button is-rounded",onClick:function(){return e.props.goToCart(e.state.hanger)}},"+"))}}]),t}(n.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){console.log(this.props.loggedInUser);var e=this.props.loggedInUser.name;return r.a.createElement("div",null,r.a.createElement("h1",null,"HI: ",e," "))}}]),t}(n.Component),_=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:"footer has-background-dark"},r.a.createElement("div",{className:"has-text-warning"},"Creado por Javier Agudo ")))}}]),t}(n.Component),R=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"banner-container"},r.a.createElement("img",{src:"https://res.cloudinary.com/dexfqvxax/image/upload/v1576487734/ResourcesIMPERIO/Banner_animated_Imperio_v2_iqzr5z.gif",alt:"Banner-Imperio"}))}}]),t}(n.Component),L=function e(){var t=this;Object(o.a)(this,e),this.createCart=function(){return t.instance.post("/new").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.readCart=function(){return t.instance.get("/").then((function(e){return Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.profileCart=function(e){return t.instance.get("/".concat(e)).then((function(e){return console.log(e.data),Promise.resolve(e.data)})).catch((function(e){return console.error(e)}))},this.instance=E.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_URL:"https://elimperio.herokuapp.com/api"}).REACT_APP_API_URL,"/cart")})};function A(e){var t=e.name,a=e.images,n=e.price,c=e._id,s=e.deleteHangerInCart;return console.log(e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container box is-rounder"},r.a.createElement("img",{src:a[0],width:"60px",alt:t}),r.a.createElement("h1",null,t),r.a.createElement("h2",null,"Precio por dia: ",n," \u20ac"),r.a.createElement("button",{onClick:function(){return s(c)}},"Delete")))}var T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).cartService=new L,a.hangerService=new w,a.state={shopItems:[],dateStart:null,dateFinish:null,days:0,totalPrice:0,open:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"deleteHangerInCart",value:function(e){var t=Object(l.a)(this.state.shopItems).filter((function(t){return!t._id.includes(e)}));this.setState(Object(i.a)({},this.state,{shopItems:t}))}},{key:"componentDidMount",value:function(){var e=[];this.props.hangers.forEach((function(t){e.push(t)})),this.setState(Object(i.a)({},this.state,{shopItems:e}))}},{key:"componentDidUpdate",value:function(){console.log(this.state.shopItems)}},{key:"render",value:function(){var e=this,t=this.state.shopItems;return r.a.createElement("div",null,0===t.length&&r.a.createElement("h1",null,"VACIO"),t.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(A,Object.assign({},t,{deleteHangerInCart:function(t){return e.deleteHangerInCart(t)}})))})))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={user:null,hangersToCart:[]},a.setUser=function(e){a.setState(Object(i.a)({},a.state,{user:e}))},a.fetchUser=function(){null===a.state.user&&a.authService.loggedInUser().then((function(e){a.setUser(e)}),(function(e){a.setUser(!1)})).catch((function(){a.setUser(!1)}))},a.logout=function(){a.authService.logout().then((function(e){a.setState(Object(i.a)({},a.state,{user:null}))})).catch((function(e){return console.log(e)}))},a.goToCart=function(e){var t=Object(l.a)(a.state.hangersToCart);t.push(e),a.setState(Object(i.a)({},a.state,{hangersToCart:t}))},a.authService=new v,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;this.fetchUser();var t=this.state,a=t.user,n=t.hangersToCart;return console.log(n),r.a.createElement("div",{className:"App"},r.a.createElement(d.StickyContainer,null,r.a.createElement("header",{className:"App-header"},r.a.createElement(R,null),r.a.createElement(U,Object.assign({},a,{logout:this.logout}))),r.a.createElement("div",null,!a&&r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(N,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(g.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(C,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(g.b,{exact:!0,path:"/catalogue",render:function(e){return r.a.createElement(P,e)}}),r.a.createElement(g.b,{exact:!0,path:"/catalogue/:id",render:function(e){return r.a.createElement(I,e)}})),a&&r.a.createElement(g.d,null,r.a.createElement(k,{exact:!0,path:"/profile",user:a,component:S}),r.a.createElement(k,{exact:!0,path:"/cart",user:a,component:T,hangers:n}),r.a.createElement(g.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(N,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(g.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(C,Object.assign({},t,{setUser:e.setUser}))}}),r.a.createElement(g.b,{exact:!0,path:"/catalogue",render:function(e){return r.a.createElement(P,e)}}),r.a.createElement(g.b,{exact:!0,path:"/catalogue/:id",render:function(t){return r.a.createElement(I,Object.assign({},t,{user:a,goToCart:e.goToCart}))}})))),r.a.createElement(_,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(O.a,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.7629559e.chunk.js.map